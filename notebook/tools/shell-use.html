<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>shell 编程入门 | 学习笔记</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/notebook/favicon.ico">
    <meta name="description" content="学习笔记文档整理">
    <link rel="preload" href="/notebook/assets/css/0.styles.0536e7aa.css" as="style"><link rel="preload" href="/notebook/assets/js/app.7af2f5e6.js" as="script"><link rel="preload" href="/notebook/assets/js/2.f2581a98.js" as="script"><link rel="preload" href="/notebook/assets/js/22.e7cfc29d.js" as="script"><link rel="prefetch" href="/notebook/assets/js/10.149f008e.js"><link rel="prefetch" href="/notebook/assets/js/11.9a5dab9f.js"><link rel="prefetch" href="/notebook/assets/js/12.e9461a99.js"><link rel="prefetch" href="/notebook/assets/js/13.de6edfd4.js"><link rel="prefetch" href="/notebook/assets/js/14.9a72600a.js"><link rel="prefetch" href="/notebook/assets/js/15.97684dc7.js"><link rel="prefetch" href="/notebook/assets/js/16.e1e73e4f.js"><link rel="prefetch" href="/notebook/assets/js/17.d25b37db.js"><link rel="prefetch" href="/notebook/assets/js/18.5f1ccd56.js"><link rel="prefetch" href="/notebook/assets/js/19.7cd4bdbc.js"><link rel="prefetch" href="/notebook/assets/js/20.528a6e03.js"><link rel="prefetch" href="/notebook/assets/js/21.cc8bc559.js"><link rel="prefetch" href="/notebook/assets/js/3.0e0de059.js"><link rel="prefetch" href="/notebook/assets/js/4.e02e7ef1.js"><link rel="prefetch" href="/notebook/assets/js/5.d301ed04.js"><link rel="prefetch" href="/notebook/assets/js/6.b94daaae.js"><link rel="prefetch" href="/notebook/assets/js/7.54763fdd.js"><link rel="prefetch" href="/notebook/assets/js/8.65551ce3.js"><link rel="prefetch" href="/notebook/assets/js/9.d7bb2ba1.js">
    <link rel="stylesheet" href="/notebook/assets/css/0.styles.0536e7aa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notebook/" class="home-link router-link-active"><!----> <span class="site-name">学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://betterrong.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  blog主页
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux学习" class="dropdown-title"><span class="title">Linux学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/Linux/vbird1/" class="nav-link">
  鸟哥的私房菜基础学习篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="go核心编程" class="dropdown-title"><span class="title">go核心编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/golang/tour-of-go/" class="nav-link">
  a tour of go
</a></li></ul></div></div><div class="nav-item"><a href="/notebook/tools/" class="nav-link router-link-active">
  tools
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://betterrong.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  blog主页
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux学习" class="dropdown-title"><span class="title">Linux学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/Linux/vbird1/" class="nav-link">
  鸟哥的私房菜基础学习篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="go核心编程" class="dropdown-title"><span class="title">go核心编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/golang/tour-of-go/" class="nav-link">
  a tour of go
</a></li></ul></div></div><div class="nav-item"><a href="/notebook/tools/" class="nav-link router-link-active">
  tools
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/notebook/tools/" aria-current="page" class="sidebar-link">tools</a></li><li><a href="/notebook/tools/gcc-use.html" class="sidebar-link">GCC 使用</a></li><li><a href="/notebook/tools/gdb-use.html" class="sidebar-link">GDB 使用</a></li><li><a href="/notebook/tools/Make-use.html" class="sidebar-link">MAKE 使用</a></li><li><a href="/notebook/tools/shell-use.html" aria-current="page" class="active sidebar-link">shell 脚本编写</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/tools/shell-use.html#_1-shell-脚本的基本语法" class="sidebar-link">1. shell 脚本的基本语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/tools/shell-use.html#_1-1-开头" class="sidebar-link">1.1 开头</a></li><li class="sidebar-sub-header"><a href="/notebook/tools/shell-use.html#_1-2-执行" class="sidebar-link">1.2 执行</a></li><li class="sidebar-sub-header"><a href="/notebook/tools/shell-use.html#_1-3-注释" class="sidebar-link">1.3 注释</a></li><li class="sidebar-sub-header"><a href="/notebook/tools/shell-use.html#_1-4-变量" class="sidebar-link">1.4 变量</a></li><li class="sidebar-sub-header"><a href="/notebook/tools/shell-use.html#_1-5-shell-程序与语句" class="sidebar-link">1.5 Shell 程序与语句</a></li><li class="sidebar-sub-header"><a href="/notebook/tools/shell-use.html#_1-5-3-结构性语句" class="sidebar-link">1.5.3 结构性语句</a></li><li class="sidebar-sub-header"><a href="/notebook/tools/shell-use.html#_1-5-4-shell-函数" class="sidebar-link">1.5.4  shell 函数</a></li><li class="sidebar-sub-header"><a href="/notebook/tools/shell-use.html#_1-5-5-shell-脚本调用" class="sidebar-link">1.5.5 shell 脚本调用</a></li></ul></li><li class="sidebar-sub-header"><a href="/notebook/tools/shell-use.html#_1-6-注意事项" class="sidebar-link">1.6 注意事项</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="shell-编程入门"><a href="#shell-编程入门" class="header-anchor">#</a> shell 编程入门</h1> <p>shell 是一个命令解释器，是介于 Linux 操作系统内核与用户之间的绝缘层。</p> <h2 id="_1-shell-脚本的基本语法"><a href="#_1-shell-脚本的基本语法" class="header-anchor">#</a> 1. shell 脚本的基本语法</h2> <h3 id="_1-1-开头"><a href="#_1-1-开头" class="header-anchor">#</a> 1.1 开头</h3> <p>shell 程序必须以下面的语句作为起始行</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>该语句指定执行 shell 脚本的程序。</p> <p>因为 Linux 中初创文件最大权限为 666，默认 umask 为 022，所以新建的文件权限为 644 即 <code>rw-r--r--</code> 文件没有执行权限。</p> <p>编辑完文件，要给文件设置可执行程序权限。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>chmod 755 filename
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后可通过</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>./filename
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>的形式运行。</p> <h3 id="_1-2-执行"><a href="#_1-2-执行" class="header-anchor">#</a> 1.2 执行</h3> <p>三种方法</p> <h4 id="方法一"><a href="#方法一" class="header-anchor">#</a> 方法一</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ ./filename
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="方法二"><a href="#方法二" class="header-anchor">#</a> 方法二</h4> <p>把文件作为参数传递给bash</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ bash filename
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="方法三"><a href="#方法三" class="header-anchor">#</a> 方法三</h4> <p>把当前目录添加到环境变量，这样就可以在任何目录下执行</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ ./filename
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_1-3-注释"><a href="#_1-3-注释" class="header-anchor">#</a> 1.3 注释</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code># 开头的句子直到此行结束都表示注释
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_1-4-变量"><a href="#_1-4-变量" class="header-anchor">#</a> 1.4 变量</h3> <p>shell 中，只有一种数据类型：字符串</p> <h4 id="_1-4-1-用户自定义变量"><a href="#_1-4-1-用户自定义变量" class="header-anchor">#</a> 1.4.1 用户自定义变量</h4> <p>变量命名通常全大写，方便辨认</p> <p>调用变量只需在变量名前加上 <code>$</code> 符即可。</p> <p>注意：“=” 两边无空格</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
VAR <span class="token operator">=</span> <span class="token string">&quot;hello,world&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$VAR</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用花括号</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token assign-left variable">num</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;this is the <span class="token variable">${num}</span>nd&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>使用 <code>unset</code> 可以删除变量的赋值。</p> <h4 id="_1-4-2-位置参数"><a href="#_1-4-2-位置参数" class="header-anchor">#</a> 1.4.2 位置参数</h4> <p><code>$0</code> ~ <code>$9</code></p> <p><code>$0</code> 通常指的文件名</p> <h4 id="_1-4-3-预定义变量"><a href="#_1-4-3-预定义变量" class="header-anchor">#</a> 1.4.3 预定义变量</h4> <ul><li><code>$#</code> 命令行参数的个数</li> <li><code>$?</code> 上一个命令的退出状态，，正常退出返回0，否则为非零值。</li> <li><code>$*</code> 所有的命令行参数。</li></ul> <h4 id="_1-4-4-环境变量"><a href="#_1-4-4-环境变量" class="header-anchor">#</a> 1.4.4 环境变量</h4> <ul><li><code>HOME</code></li> <li><code>PATH</code></li> <li><code>PS1</code></li> <li><code>SHELL</code></li></ul> <p>设置环境变量的方法</p> <ul><li><p><code>echo</code> 显示指定环境变量</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> <span class="token environment constant">$SHELL</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>ecport</code> 设置环境变量</p></li> <li><p><code>env</code> 显示所有环境变量</p></li> <li><p><code>set</code> 显示所有本地定义的 shell 变量</p></li> <li><p>unset 清楚环境变量</p></li></ul> <h3 id="_1-5-shell-程序与语句"><a href="#_1-5-shell-程序与语句" class="header-anchor">#</a> 1.5 Shell 程序与语句</h3> <p>说明性语句、功能性语句、结构性语句</p> <h4 id="_1-5-1-说明性语句"><a href="#_1-5-1-说明性语句" class="header-anchor">#</a> 1.5.1 说明性语句</h4> <p>注释行，不能被执行</p> <h4 id="_1-5-2-功能性语句"><a href="#_1-5-2-功能性语句" class="header-anchor">#</a> 1.5.2 功能性语句</h4> <ol><li><p><code>read</code> 键盘读入变量值</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">read</span> 变量名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>示例</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">read</span> -p <span class="token string">&quot;input 2 num&quot;</span> NUM1 NUM2
<span class="token builtin class-name">echo</span> <span class="token variable">$NUM1</span> <span class="token variable">$NUM2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>算术运算命令</p> <p>算术运算命令 <code>expr</code> 主要用于简单的整数运算 ，加减乘除求模等等。</p> <p>用反引号括起来。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#!bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;请输入两个数：&quot;</span>
<span class="token builtin class-name">read</span> NUM1 NUM2
<span class="token assign-left variable">add</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $NUM1 + $NUM2<span class="token variable">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><code>test</code>  命令</p> <p>test 可测试 3 种对象</p> <p>字符串、整数、文件属性</p> <ol><li><p>字符串测试</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>s1 <span class="token operator">=</span> s2 
s1 <span class="token operator">!=</span> s2
-z s1
-n s1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>实例</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
r<span class="token variable">$ead</span> var1 <span class="token variable">$var2</span>
<span class="token punctuation">[</span> var1 <span class="token operator">=</span> var2 <span class="token punctuation">]</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>整数测试</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>a -eq b
a -ne b
a -gt b
a -ge b
a -lt b
a -le b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>实例</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#!bin/bash</span>
<span class="token builtin class-name">read</span> x y
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token variable">$y</span> -eq <span class="token variable">$x</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$x</span> = <span class="token variable">$y</span>&quot;</span>
<span class="token keyword">else</span> 
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$x</span> != <span class="token variable">$y</span>&quot;</span>
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>文件测试</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>-d name
-f name
-L name
-r name
-w name
-x name
-s name
f1 -nt f2
f1 -ot f2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>实例</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">test</span> -d /home/rong
<span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
// <span class="token number">0</span> 表示存在， <span class="token number">1</span> 表示不存在
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol> <h3 id="_1-5-3-结构性语句"><a href="#_1-5-3-结构性语句" class="header-anchor">#</a> 1.5.3 结构性语句</h3> <ol><li><p>条件测试语句</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token keyword">if</span> 表达式
	<span class="token keyword">then</span> 命令表
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>多路分支语句</p> <div class="language-ah line-numbers-mode"><pre class="language-text"><code>case 字符串变量 in
	1) 
	2)
	3)
esac
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>实例</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token keyword">case</span> <span class="token variable">$2</span> <span class="token keyword">in</span>
  <span class="token comment"># 加</span>
  +<span class="token punctuation">)</span>
  <span class="token assign-left variable">ANS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $1 + $3<span class="token variable">`</span></span>
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token comment"># 减</span>
  -<span class="token punctuation">)</span> 
  <span class="token assign-left variable">ANS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $1 - $3<span class="token variable">`</span></span>
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token comment"># 乘</span>
  <span class="token punctuation">\</span>*<span class="token punctuation">)</span> <span class="token assign-left variable">ANS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $1 <span class="token punctuation">\</span>* $3<span class="token variable">`</span></span>
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token comment"># 除</span>
  /<span class="token punctuation">)</span> <span class="token assign-left variable">ANS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $1 / $3<span class="token variable">`</span></span>
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token comment"># 取余</span>
  %<span class="token punctuation">)</span> <span class="token assign-left variable">ANS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $1 % $3<span class="token variable">`</span></span>
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$ANS</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li> <li><p>循环语句——for</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token keyword">for</span> 变量名 <span class="token keyword">in</span> 单词表
<span class="token keyword">do</span>
	命令表
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>实例</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token assign-left variable">flist</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ls</span><span class="token variable">`</span></span>
<span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token variable">$flist</span>
<span class="token keyword">do</span>
<span class="token punctuation">..</span>.
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>循环语句——while</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token keyword">while</span> 命令或表达式
<span class="token keyword">do</span>
命令表
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$CHOICE</span> -ne <span class="token number">4</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;***************************&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;*        功能菜单         *&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;*  1.复制      2.重命名   *&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;*  3.删除文件   4.退出    *&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;***************************&quot;</span>
<span class="token builtin class-name">read</span> CHOICE
<span class="token keyword">case</span> <span class="token variable">$CHOICE</span> <span class="token keyword">in</span>
  <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token builtin class-name">read</span> -p <span class="token string">&quot;请输入 src dst：&quot;</span> SRC DST
  <span class="token comment"># 如果要复制的对象是目录</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -d <span class="token variable">$SRC</span> <span class="token punctuation">]</span>
  <span class="token keyword">then</span> 
    <span class="token builtin class-name">echo</span> <span class="token variable">$SRC</span> <span class="token variable">$DST</span>
    <span class="token function">cp</span> -r <span class="token variable">$SRC</span> <span class="token variable">$DST</span>
    <span class="token builtin class-name">echo</span> 目录已复制到目的地
  <span class="token comment"># 要复制的对象是普通文件</span>
  <span class="token keyword">else</span>
    <span class="token function">cp</span> <span class="token variable">$SRC</span> <span class="token variable">$DST</span>
    <span class="token builtin class-name">echo</span> 文件复制完成～
  <span class="token keyword">fi</span>
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token builtin class-name">read</span> -p <span class="token string">&quot;请输入 src dst：&quot;</span> SRC DST  
  <span class="token function">mv</span> <span class="token variable">$SRC</span> <span class="token variable">$DST</span>
  <span class="token builtin class-name">echo</span> 该文件重命名成功～
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token number">3</span><span class="token punctuation">)</span>
  <span class="token builtin class-name">read</span> -p <span class="token string">&quot;请输入要删除的文件：&quot;</span> DEL
  <span class="token comment"># 如果要删除的对象是目录</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -d <span class="token variable">$DEL</span> <span class="token punctuation">]</span>
  <span class="token keyword">then</span>
  <span class="token function">rm</span> -r <span class="token variable">$DEL</span>
  <span class="token builtin class-name">echo</span> 该文件夹删除成功～
  <span class="token comment"># 如果要删除的对象是普通文件</span>
  <span class="token keyword">else</span>
    <span class="token function">rm</span> <span class="token variable">$DEL</span>
    <span class="token builtin class-name">echo</span> 该文件删除成功～
  <span class="token keyword">fi</span>
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token comment">#没有选择1 2 3则退出</span>
  *<span class="token punctuation">)</span> 
  <span class="token assign-left variable">CHOICE</span><span class="token operator">=</span><span class="token number">4</span>
  <span class="token builtin class-name">echo</span> bye~
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div></li></ol></li></ol> <h3 id="_1-5-4-shell-函数"><a href="#_1-5-4-shell-函数" class="header-anchor">#</a> 1.5.4  shell 函数</h3> <p>函数在调用前必须先定义，即在顺序上函数说明必须放在调用函数前面。</p> <p>调用函数可以传参数给函数，函数可用 retrurn 语句把结果传给调用程序。函数仅仅在当前 shell 中起作用。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function-name function">function_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	command1
	<span class="token punctuation">..</span>.
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>调用函数</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>funtion_name arg1 arg2<span class="token variable">`</span></span>
或
funtion_name arg1 arg2
<span class="token builtin class-name">echo</span> $？
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>实例</p> <div class="language-shh line-numbers-mode"><pre class="language-text"><code>#!/bin/bash
function add () {
  z=`expr $1 + $2`
  return $z
}
add 3 5
echo $?

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_1-5-5-shell-脚本调用"><a href="#_1-5-5-shell-脚本调用" class="header-anchor">#</a> 1.5.5 shell 脚本调用</h3> <p>shell 脚本调用的执行过程中，支持调用另一个 shell 脚本</p> <p>调用格式为</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>脚本名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;调用脚本计算器.sh&quot;</span>
<span class="token function">bash</span> ./simple_calc.sh <span class="token number">3</span> + <span class="token number">2</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;调用结束&quot;</span>
<span class="token comment">#simple_calc.sh</span>
<span class="token keyword">case</span> <span class="token variable">$2</span> <span class="token keyword">in</span>
  <span class="token comment"># 加</span>
  +<span class="token punctuation">)</span>
  <span class="token assign-left variable">ANS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $1 + $3<span class="token variable">`</span></span>
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token comment"># 减</span>
  -<span class="token punctuation">)</span> 
  <span class="token assign-left variable">ANS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $1 - $3<span class="token variable">`</span></span>
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token comment"># 乘</span>
  <span class="token punctuation">\</span>*<span class="token punctuation">)</span> <span class="token assign-left variable">ANS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $1 <span class="token punctuation">\</span>* $3<span class="token variable">`</span></span>
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token comment"># 除</span>
  /<span class="token punctuation">)</span> <span class="token assign-left variable">ANS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $1 / $3<span class="token variable">`</span></span>
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token comment"># 取余</span>
  %<span class="token punctuation">)</span> <span class="token assign-left variable">ANS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $1 % $3<span class="token variable">`</span></span>
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$ANS</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="_1-6-注意事项"><a href="#_1-6-注意事项" class="header-anchor">#</a> 1.6 注意事项</h2> <ol><li>Linux 编辑中区分大小写字符</li> <li>加入必要的注释以便于维护</li> <li>对 shell 变量进行数字运算，使用乘法符号 <code>*</code> 时，要用转义字符进行转义。</li> <li>shell 命令对命令中多余的空格不进行任何处理。</li> <li>函数命名要使用有含义易于理解的名字。</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notebook/tools/Make-use.html" class="prev">
        MAKE 使用
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/notebook/assets/js/app.7af2f5e6.js" defer></script><script src="/notebook/assets/js/2.f2581a98.js" defer></script><script src="/notebook/assets/js/22.e7cfc29d.js" defer></script>
  </body>
</html>
