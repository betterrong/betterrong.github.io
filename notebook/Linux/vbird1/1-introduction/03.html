<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>主机规划与磁盘分区 | 学习笔记</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/notebook/favicon.ico">
    <meta name="description" content="学习笔记文档整理">
    <link rel="preload" href="/notebook/assets/css/0.styles.0536e7aa.css" as="style"><link rel="preload" href="/notebook/assets/js/app.c5692012.js" as="script"><link rel="preload" href="/notebook/assets/js/2.f2581a98.js" as="script"><link rel="preload" href="/notebook/assets/js/7.d1f4449f.js" as="script"><link rel="prefetch" href="/notebook/assets/js/10.db67c84e.js"><link rel="prefetch" href="/notebook/assets/js/11.821af675.js"><link rel="prefetch" href="/notebook/assets/js/12.05e91002.js"><link rel="prefetch" href="/notebook/assets/js/13.8b98dbd6.js"><link rel="prefetch" href="/notebook/assets/js/14.72ae0942.js"><link rel="prefetch" href="/notebook/assets/js/3.6922496d.js"><link rel="prefetch" href="/notebook/assets/js/4.e02e7ef1.js"><link rel="prefetch" href="/notebook/assets/js/5.6566a3b1.js"><link rel="prefetch" href="/notebook/assets/js/6.1157df18.js"><link rel="prefetch" href="/notebook/assets/js/8.49bcffd4.js"><link rel="prefetch" href="/notebook/assets/js/9.6670a53f.js">
    <link rel="stylesheet" href="/notebook/assets/css/0.styles.0536e7aa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notebook/" class="home-link router-link-active"><!----> <span class="site-name">学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://betterrong.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  blog主页
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux学习" class="dropdown-title"><span class="title">Linux学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/Linux/vbird1/" class="nav-link router-link-active">
  鸟哥的私房菜基础学习篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="golang学习" class="dropdown-title"><span class="title">golang学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/golang/tour-of-go/" class="nav-link">
  a tour of go
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://betterrong.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  blog主页
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux学习" class="dropdown-title"><span class="title">Linux学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/Linux/vbird1/" class="nav-link router-link-active">
  鸟哥的私房菜基础学习篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="golang学习" class="dropdown-title"><span class="title">golang学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/golang/tour-of-go/" class="nav-link">
  a tour of go
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/notebook/Linux/vbird1/" aria-current="page" class="sidebar-link">导航</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>1 Linux的规则和安装</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notebook/Linux/vbird1/1-introduction/01.html" class="sidebar-link">1.1 计算机概论</a></li><li><a href="/notebook/Linux/vbird1/1-introduction/02.html" class="sidebar-link">1.2 Linux是什么与如何学习</a></li><li><a href="/notebook/Linux/vbird1/1-introduction/03.html" aria-current="page" class="active sidebar-link">1.3 主机规划与磁盘分区</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/Linux/vbird1/1-introduction/03.html#_0x00-linux与硬件的搭配" class="sidebar-link">0x00 Linux与硬件的搭配</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/Linux/vbird1/1-introduction/03.html#_1-各硬件设备在linux中的文件名" class="sidebar-link">1 各硬件设备在Linux中的文件名</a></li></ul></li><li class="sidebar-sub-header"><a href="/notebook/Linux/vbird1/1-introduction/03.html#_0x01-磁盘分区" class="sidebar-link">0x01 磁盘分区</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/Linux/vbird1/1-introduction/03.html#_1-磁盘连接方式与设备文件名的关系" class="sidebar-link">1 磁盘连接方式与设备文件名的关系</a></li><li class="sidebar-sub-header"><a href="/notebook/Linux/vbird1/1-introduction/03.html#_2-mbr（ms-dos）-和-gpt磁盘分区表（partition-table）" class="sidebar-link">2 MBR（MS-DOS） 和 GPT磁盘分区表（partition table）</a></li><li class="sidebar-sub-header"><a href="/notebook/Linux/vbird1/1-introduction/03.html#_3-linux-安装模式下，磁盘分区的选择" class="sidebar-link">3 Linux 安装模式下，磁盘分区的选择</a></li><li class="sidebar-sub-header"><a href="/notebook/Linux/vbird1/1-introduction/03.html#_4-安装linux前的规划" class="sidebar-link">4 安装Linux前的规划</a></li></ul></li><li class="sidebar-sub-header"><a href="/notebook/Linux/vbird1/1-introduction/03.html#_0x02-重点回顾" class="sidebar-link">0x02 重点回顾</a></li></ul></li><li><a href="/notebook/Linux/vbird1/1-introduction/04.html" class="sidebar-link">1.4 安装 CentOS7.x </a></li><li><a href="/notebook/Linux/vbird1/1-introduction/05.html" class="sidebar-link">1.5 首次登录与线上求助 </a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="主机规划与磁盘分区"><a href="#主机规划与磁盘分区" class="header-anchor">#</a> 主机规划与磁盘分区</h1> <p>作者：溶 时间：2020年07月15日</p> <h2 id="_0x00-linux与硬件的搭配"><a href="#_0x00-linux与硬件的搭配" class="header-anchor">#</a> 0x00 Linux与硬件的搭配</h2> <p><strong>一切都是文件</strong></p> <h3 id="_1-各硬件设备在linux中的文件名"><a href="#_1-各硬件设备在linux中的文件名" class="header-anchor">#</a> 1 各硬件设备在Linux中的文件名</h3> <table><thead><tr><th style="text-align:center;">设备</th> <th style="text-align:center;">Linux中的文件名</th></tr></thead> <tbody><tr><td style="text-align:center;">SCSI、SATA、USB磁盘驱动器</td> <td style="text-align:center;"><strong>/dev/sd[a-p]</strong></td></tr> <tr><td style="text-align:center;">U盘</td> <td style="text-align:center;"><strong>/dev/sd[a-p]</strong></td></tr> <tr><td style="text-align:center;">Virtio接口</td> <td style="text-align:center;"><strong>/dev/vd[a-p]（用于虚拟机内）</strong></td></tr> <tr><td style="text-align:center;">软盘驱动器</td> <td style="text-align:center;"><strong>/dev/fd[0-7]</strong></td></tr> <tr><td style="text-align:center;">打印机</td> <td style="text-align:center;"><strong>/dev/lp[0-2]</strong>(25针打印机)<br><strong>/dev/usb/lp[0-15]（USB接口）</strong></td></tr> <tr><td style="text-align:center;">鼠标</td> <td style="text-align:center;"><strong>/dev/input/mouse[0-15]（通用）</strong><br><strong>/dev/psaux(PS/2接口)</strong><br><strong>/dev/mouse （当前鼠标）</strong></td></tr> <tr><td style="text-align:center;">CD-ROM、DVD-ROM</td> <td style="text-align:center;"><strong>/dev/scd[0-1] （通用</strong>）<br><strong>/dev/sr[0-1]（CentOS常见）</strong><br><strong>/dev/cdrom （当前CD-ROM）</strong></td></tr> <tr><td style="text-align:center;">磁带机</td> <td style="text-align:center;"><strong>/dev/ht0 （IDE接口）</strong><br><strong>/dev/st0 （SATA/SCSI接口）</strong><br><strong>/dev/tape （当前磁带）</strong></td></tr> <tr><td style="text-align:center;">IDE磁盘驱动器</td> <td style="text-align:center;"><strong>/dev/hd[a-d]（旧式系统才有）</strong></td></tr></tbody></table> <ul><li>SCSI：小型计算机接口，一种用于计算机和周边设备之间系统级接口的独立处理器标准。</li> <li>要注意的是使用云端机时，你得到的是虚拟机，为了加速，虚拟机内的磁盘使用仿真机产生，一般被命名为 <code>/dev/vd/[a-p]</code></li> <li>SATA：串行高级技术附件</li></ul> <h2 id="_0x01-磁盘分区"><a href="#_0x01-磁盘分区" class="header-anchor">#</a> 0x01 磁盘分区</h2> <h3 id="_1-磁盘连接方式与设备文件名的关系"><a href="#_1-磁盘连接方式与设备文件名的关系" class="header-anchor">#</a> 1 磁盘连接方式与设备文件名的关系</h3> <ul><li><p>正常的物理机器大概使用的都是/dev/sd[a-p]这样的磁盘文件名，虚拟机环境中可能为了加速，会使用/dev/vd[a-p]这样的设备文件名。</p></li> <li><p>SATA/USB/SAS 等磁盘接口都是使用 SCS 模块来驱动的， 因此都是 <code>/dev/sd[a-p]</code> 的格式。</p></li> <li><p>确定顺序是按 Linux 核心侦测到的磁盘顺序分配文件名，是检测到的顺序， 比如 USB 是系统启动后才检测到，那么 USB 的文件名就是 <code>/dev/sdc</code></p></li> <li><p>磁盘的组成部分主要有盘片、机械手臂、磁头与主轴马达所组成，数据的写入其实是在盘片上面。 盘片上面有可细分出扇区（Sector）与磁道（Track）两种单位，扇区的物理量设计有 512 Bytes 与 4 KBytes. 假设只有一个盘片，那么盘片有点像下面这样：</p> <p><img src="https://s1.ax1x.com/2020/07/22/U7W9Ug.png" alt="U7W9Ug.png"></p></li> <li><p>碟片上面可细分出扇区和磁道两种单位，其中扇区的物理大小设计有两种，分别是512字节和4k字节。整块磁盘的第一个扇区特别重要。早期的第一个扇区里面含有的重要信息我们称为MBR格式。GPT是一个新的磁盘分区格式。</p></li></ul> <h3 id="_2-mbr（ms-dos）-和-gpt磁盘分区表（partition-table）"><a href="#_2-mbr（ms-dos）-和-gpt磁盘分区表（partition-table）" class="header-anchor">#</a> 2 MBR（MS-DOS） 和 GPT磁盘分区表（partition table）</h3> <p>上面示例图中，有开始磁道和结束磁道，通常磁盘有多个盘片，所有盘片的同一个磁道我们成为柱面（Cylinder）， 通常这是文件的系统的最小单位，也就是最小的分区单位。 但是在 GPT 中，可达到 64 bit 记录功能的分区表， 现在甚至可以使用扇区（sector）号码来作为分区单位了。</p> <p>所以说就是利用参考对照柱面或扇区号码方式来处理。</p> <h4 id="_2-1-mbr分区表的格式与限制"><a href="#_2-1-mbr分区表的格式与限制" class="header-anchor">#</a> 2.1 MBR分区表的格式与限制</h4> <p>早期 Linux 系统为了兼容 Windows 磁盘，使用的是支持 Windows 的 MBR（Master boot record ，开机记录表） 的方式来处理开机管理程序与分区表。</p> <p>开机管理程序记录区域分区表则通通放在磁盘的第一个扇区，通常是 512 Bytes 大小，</p> <p>第一个扇区的512字节通常有：</p> <ul><li><p>主引导记录（MBR），安装启动引导程序的地方，446字节。</p></li> <li><p>分区表，记录整块硬盘分区的状态，64字节。最多四组记录区，每组分区记录了该区段的起始与结束的柱面号码。</p> <p>得到的几个重要信息：</p></li> <li><p>所谓的分区指示针对那个64字节的分区表进行设置。</p></li> <li><p>硬盘默认的分区表仅仅能写入四组分区信息。</p></li> <li><p>四组划分信息我们称为主要或扩展分区。</p></li> <li><p>分区的最小单位通常为柱面。</p></li> <li><p>当系统写入磁盘时，一定会参考磁盘分区表，才能针对某个分区进行数据的处理。</p></li> <li><p>扩展分区的目的是使用额外的扇区来记录分区信息，扩展分区本身并不能被拿来格式化。</p></li> <li><p>由扩展分区切出来的分区，称为逻辑分区。</p></li> <li><p>逻辑分区的设备名称号码由5号开始。</p> <p>关于主分区、扩展分区、逻辑分区，有如下特性：</p></li></ul> <ol><li>主分区和扩展分区最多有四个（硬盘限制）</li> <li>扩展分区最多有一个（操作系统的限制）</li> <li>逻辑分区是扩展分区持续划分出来的分区。</li> <li>能够被格式化后作为数据存取的分区是主分区和逻辑分区，扩展分区无法格式化。</li> <li>扩展分区的数量依操作系统而不同。</li> <li>分区是以柱面为单位的连续磁盘空间。</li> <li>如果扩展分区被破坏，所有的逻辑分区将被删除。</li></ol> <p>MBR分区表的限制：</p> <ol><li>操作系统无法使用2.2TB以上的磁盘容量。</li> <li>MBR仅有一个区块，若被破坏，无法或很难恢复。</li> <li>MBR内的存放启动引导程序的区块仅仅446字节，无法存储较多程序代码。</li></ol> <h4 id="_2-2-gpt-（guid-partition-table）磁盘分区表"><a href="#_2-2-gpt-（guid-partition-table）磁盘分区表" class="header-anchor">#</a> 2.2 GPT （GUID partition table）磁盘分区表</h4> <ul><li>目前已经有4k的扇区出现，为了兼容所有的磁盘，在扇区的定义上面，大多会使用逻辑区块地址（LBA）来处理。GPT将磁盘所有区块依次LBA(默认512字节)浪费规划，第一个LBA称为LBA0.</li> <li>GPT使用34个区块来记录分区信息。GPT除了前面的34个LBA外还把整个磁盘的最后34个LBA拿来做另一个备份。</li> <li>LBA0-MBR兼容区块。</li> <li>LBA1- GPT表头记录，记录了分区表本身的位置和大小，同时记录了备份用的GPT分区的位置，同时放置了分区表的校验码。</li> <li>LBA2-33 （实际记录分区信息处），LBA2到LBA33，每个LBA都可以记录4组分区记录，共可以有128组分区记录。</li> <li>GPT分区已经没有所谓主分区、扩展分区、逻辑分区等概念了。每个分区都可以拿来格式化并使用。</li></ul> <h4 id="_2-3-启动流程中的bios和uefi启动检测程序"><a href="#_2-3-启动流程中的bios和uefi启动检测程序" class="header-anchor">#</a> 2.3 启动流程中的BIOS和UEFI启动检测程序</h4> <p>目前主机系统在载入硬件驱动方面的程序，主要有早期的 BIOS 与新的 UEFI 两种机制。</p> <h5 id="（1）-bios-搭配-mbr-gpt的启动方式"><a href="#（1）-bios-搭配-mbr-gpt的启动方式" class="header-anchor">#</a> （1） BIOS 搭配 MBR/GPT的启动方式</h5> <ul><li>BIOS就是启动的时候计算机系统会主动执行的第一个程序。</li> <li>BIOS到硬盘中读取第一个扇区的MBR位置，里面存放了最基本的启动引导程序。该程序的主要目的就是加载内核文件。</li> <li>启动流程：
<ol><li>BIOS：启动主动执行的固件，会认识第一个可启动的设备。</li> <li>MBR：第一个可启动设备的第一个扇区内的主引导记录块，内含启动引导代码。</li> <li>启动引导程序：一个可读取内核文件来执行的软件。</li> <li>内核文件：开始启动操作系统。</li></ol></li> <li>boot loader</li> <li>每个分区都有自己的启动扇区。</li> <li>实际可启动的内核文件是放置到各分区中的。</li> <li>loader 可直接指向或则是间接将管理权转交给另一个管理程序</li></ul> <h5 id="（2）uefi-bios搭配gpt开机的流程"><a href="#（2）uefi-bios搭配gpt开机的流程" class="header-anchor">#</a> （2）UEFI BIOS搭配GPT开机的流程</h5> <ul><li><p>MBR 的 BIOS 太落后了，出现了使用 C 写的 UEFI（Unified Extensible Firmware Interface） 统一可延伸固件界面</p></li> <li><p>基本上，传统 BIOS 与 UEFI 的差异可以用下表来说明</p> <table><thead><tr><th>比较项目</th> <th>传统 BIOS</th> <th>UEFI</th></tr></thead> <tbody><tr><td>使用程序语言</td> <td>组合语言</td> <td>C 语言</td></tr> <tr><td>硬件资源控制</td> <td>使用终端（IRQ) 管理，不可变的内存存取，不可变的输入 / 输出存取</td> <td>使用驱动程序与协定</td></tr> <tr><td>处理器运行环境</td> <td>16 位</td> <td>CPU 保护模式</td></tr> <tr><td>扩充方式</td> <td>通过 IRQ 链接</td> <td>直接载入驱动程序</td></tr> <tr><td>第三方厂商支持</td> <td>较差</td> <td>较佳且可支持多平台</td></tr> <tr><td>图形化能力</td> <td>较差</td> <td>较佳</td></tr> <tr><td>内置简化操作系统前环境</td> <td>不支持</td> <td>支持</td></tr></tbody></table></li> <li><p>目前 UEFI 一般用来作为启动操作系统之前的硬件检测、开机管理、软件设置等目的， 当载入系统后，就停会停止工作，将系统交给操作系统。</p></li> <li><p>此外，由于过去 cracker 经常借由 BIOS 开机阶段来破坏系统，并取得控制权，因此 UEFI 加入了一个 安全启动（<strong>secure boot</strong>）机制，表示即将开机的操作系统必须被 UEFI 所验证，否则就无法顺利开机， 微软用了很多这样的机制来管理硬件。不过有些时候可能启用该机制之后，无法进入 windows 或则 linux，需要关闭。</p></li></ul> <div class="custom-block tip"><p class="custom-block-title">note</p> <p>由于 UEFI 克服了 BIOS 的 1024 柱面的问题，因此你的开机管理程序与核心放置磁盘开始前 2 TB 位置内即可，加上之前提到的 BIOS boot 以及 UEFI 支持的分区，基本上你的 <code>boot</code> 目录 几乎都是 <code>/dev/sda3</code> 之后的号码了，这样开机还是没有问题的，与之前熟悉的分区状态已经不同， /boot 不再是 /dev/sda1 了。</p></div> <h3 id="_3-linux-安装模式下，磁盘分区的选择"><a href="#_3-linux-安装模式下，磁盘分区的选择" class="header-anchor">#</a> 3 Linux 安装模式下，磁盘分区的选择</h3> <h4 id="_3-1-目录树结构"><a href="#_3-1-目录树结构" class="header-anchor">#</a> 3.1  目录树结构</h4> <ul><li><p>linux 下所有的数据都是以文件的形态来呈现的，所以最重要的就是目录树架构。</p></li> <li><p>目录树架构就是以根目录为主，然后向下呈现分支状的目录结构的一种文件夹沟。所以，整个目录树最重要的就是根目录 <code>/</code>，所有的文件都与目录树有关，目录树呈现方式如下图：</p> <p><img src="https://s1.ax1x.com/2020/07/23/ULw4sS.png" alt="ULw4sS.png"></p> <p>所有的文件都由 <code>/</code> 衍生而来。上图长方形为目录，波浪形为文件，比如想要取得 mydata 那个文件时， 系统就得由根目录开始找，查找就形成了一条路径 <code>/home/dmtsai/mydata</code></p></li></ul> <h4 id="_3-2-文件系统与目录树的关系（挂载）"><a href="#_3-2-文件系统与目录树的关系（挂载）" class="header-anchor">#</a> 3.2 文件系统与目录树的关系（挂载）</h4> <p><strong>挂载</strong> 就是利用一个目录当成进入点，将磁盘分区槽的数据放置在该目录下。 也就是说，进入该目录就可以读取该分区槽的意思，这个动作我们成为挂载。</p> <p>由于整个 Linux 系统最重要的就是根目录，因此根目录一定需要挂载到某个分区槽的， 至于其他的目录则可依据用户自己的需求来挂载到不同的分区槽。</p> <p><img src="https://s1.ax1x.com/2020/07/23/ULD4sK.png" alt="ULD4sK.png"></p> <ul><li>partition 1 挂载到根目录下</li> <li>partition 2 挂载到 /home 下</li></ul> <p>也就是说，当把数据放置在 /home 下时，是放在了 partition 2 上的，否则就是放在 partition 1上的。</p> <h4 id="_3-3-发行版安装时，挂载点与磁盘分区的规划"><a href="#_3-3-发行版安装时，挂载点与磁盘分区的规划" class="header-anchor">#</a> 3.3 发行版安装时，挂载点与磁盘分区的规划</h4> <ul><li><p>A: 初次接触 Linux：只要分区 「/」及「swap」即可</p> <p>原因是怕分错导致无法安装的困境，比如 <code>/usr</code> 是 linux 的<strong>可执行程序以及相关的文件存放目录</strong>， 所以对容量需求蛮大的，万一分小了，可能造成无法将数据完全写入，就安装不了了</p></li> <li><p>B：建议分区的方法：预留一个备用的深入磁盘容量</p> <p>在学习 linux 过程中，最麻烦的可能就是得常常处理分区的问题，如果你将整个硬盘的容量都用光了， 那么要如何联系分区功能呢？</p> <p>另外，预留的分区槽也可以拿来作为备份用，比如你需要重装系统时，把一些重要的脚步备份到这个备用分区中， 重装的时候就可以立马找到他们。</p></li> <li><p>选择 Linux 安装程序提供的默认硬盘分区方式</p> <p>对于首次接触 linux 的朋友们，通常不建议使用 distribution 所预设的 server 安装方式， 因为会让你无法得知 linux 在搞什么，而且需要注意的是，选择 server 的时候，会自动把你硬盘里面所有的数据全部抹掉</p></li></ul> <h3 id="_4-安装linux前的规划"><a href="#_4-安装linux前的规划" class="header-anchor">#</a> 4 安装Linux前的规划</h3> <h4 id="_4-1-安装适当的发行版"><a href="#_4-1-安装适当的发行版" class="header-anchor">#</a> 4.1 安装适当的发行版</h4> <p>前面已经讲到过了，所有的 linux distribution 都是使用 https://www.kernel.org 的 linux 核心，差异不是很大，根据自己的需求选择。</p> <p>本次课程使用 CentOS 7.1，从 7.0 开始已经不再提供 386 兼容版本了，也就是只支持 64 位硬件</p> <ul><li>国家高速网络中心：http://ftp.twaren.net/Linux/CentOS/7/isos/</li> <li>CentOs 官网：http://mirror.centos.org/centos/7/isos/</li></ul> <p>版本说明：</p> <ul><li>everything：完整版本</li> <li>DVD1：有大部分安装软件的版本</li> <li>LiveCD/LiveGNOME/LiveKDE：只想要看看到底开机会是说明 Linux 环境</li> <li>minimal：想要练功，就直接使用最小安装光盘版</li></ul> <p>CentOS-7-x86_64-Everything-1908.iso 下载的文档名中各个文字表示什么？</p> <ul><li>CentOS-7 ：7.x 版本</li> <li>x86_64：指 64 位操作系统</li> <li>Everything ：指完整版本</li> <li>1908：表示 2019 年 08 月发表的版本</li></ul> <h4 id="_4-2-主机的服务规划与硬件的关系"><a href="#_4-2-主机的服务规划与硬件的关系" class="header-anchor">#</a> 4.2 主机的服务规划与硬件的关系</h4> <p>硬件的选择与你所需要用来做什么密切关联，这里就不再记录详细的，只记录可以用来做哪些事情，对应的硬件不详细记录</p> <ul><li><p>打造 windows 与 Linux 共存的环境：需要用到前面讲过的开机流程与多重引导知识</p></li> <li><p>NAT (达成 IP 分享器的功能)：</p> <p>对外一条出口 IP，内部通过这条联机联机到因特网上， 使用 linux 的好处就是可以加装其他分析和管理软件，比某些 IP 分享器更高级的管理功能</p></li> <li><p>SAMBA（加入 windows 网络邻居）</p></li> <li><p>Mail（邮件服务器）</p> <p>现在有很多免费的邮件服务商，但是对于企业内部，害怕隐私泄露什么的，可以自己安装 Mail 服务</p></li> <li><p>Web（www 服务器）</p> <p>WWW 服务服务器几乎是所有的网络主机都会安装的一个工能够，除了可以提供 Internet 的 www 联机之外， 还提供一些分析软件提供的分析结果画面</p> <p>CentOS 使用的是 Apache 这套软件来达成 www 网站的功能</p></li> <li><p>DHCP（提供客户端自动取得 IP 的功能）</p> <p>如果你是个局域网网络管理员，你可以假设一个 DHCP 服务器，配置要求不高， 貌似现在的各种路由器也都内置 DHCP 服务了</p></li> <li><p>FTP</p> <p>很多人喜欢假设 FTP 传输网络数据，甚至使用 FTP 传输非法数据，老实说，再怎么地下化也很容易被捉到， 但是学校等组织经常需要 ftp 进行分享资源给全校师生一些免费的资源，此时匿名的 ftp 软件功能就很有需要存在了</p> <p>对于 ftp 的硬件需求来说，硬盘的容量与网络卡好坏相关性较高</p></li></ul> <h4 id="_4-3-主机硬盘的主要规划-主机硬盘的主要规划"><a href="#_4-3-主机硬盘的主要规划-主机硬盘的主要规划" class="header-anchor">#</a> 4.3 主机硬盘的主要规划)主机硬盘的主要规划</h4> <p>除了上述的与用途之外，还需要对数据分类与数据安全性的考虑，所谓的数据安全，并不是说呗黑客所破坏， 而是当主机系统的硬件出现问题时，你的文件数据能否安全的保存</p> <p>网络上经常有人问：因为非法关机（突然断电）等问题，导致 linux 无法开机，怎么办？ 幸运的话，可以使用 fsck 来解决硬盘的问题，倒霉的话，可能需要重新安装 linux， 如果重装的话，光是搬移与备份数据就会疯掉了，使用硬盘的分区考虑是相当重要的</p> <p>前面有讨论过 磁盘分区了，但是硬盘规划对于刚入门而已，很是头痛， 因为需要对 linux 文件结构有相当程度的认知之后才能够做比较完善的规划，所以这里只要有个基础的认识即可。</p> <p>老实说，没有安装过 10 次以上的 linux 系统，是学不会 linux 与磁盘分区的</p> <p>这里说明一下基本硬盘分区的模式：</p> <ul><li><p>最简单的分区方法</p> <p>前面已经说过，只需要分区出 根目录 与内存置换空间（/ 与 swap）即可。 再预留一些剩余的磁盘供后续练习使用，当然这是懒人分区方式，因为如果任何一个小细节坏掉（如坏轨的产生）， 你的根目录将可能整个的顺坏，挽救方面较困难</p></li> <li><p>稍微麻烦一点的方式</p> <p>先分析出这部主机未来的用途，然后根据用途区分析需要较大容量的目录，以及读写较为频繁的目录， 将这些重要的目录分别独立出来而不与根目录放在一起，当这些读写频繁的磁盘分区槽有问题时， 至少不会影响到根目录的系统数据，挽救就比较容易了，在默认的 CentOS 环境下，下面的目录是比较符合大容量或读写频繁的目录：</p> <ul><li>/boot</li> <li>/</li> <li>/home</li> <li>/var</li> <li>Swap</li></ul> <h2 id="_0x02-重点回顾"><a href="#_0x02-重点回顾" class="header-anchor">#</a> 0x02 重点回顾</h2> <ul><li>新购买计算机硬件配备时，需要考虑的角度有游戏、工作机、效能 / 价格比、效能 / 消耗瓦数、支持度等</li> <li>旧的硬件配备可能由于保存的问题或则是电子零件老化的问题，导致计算机系统非常容易在运作过程中出现不明的宕机情况</li> <li>Red Hat 的硬件支持：https://hardware.redhat.com/?pagename=hcl</li> <li>在 Linux 系统中，每个装置都被当成一个文件来对待，每个装置都有装置文件名</li> <li>磁盘装置文件名通常分为两种，实际 SATA/USB 装置文件名为 <code>/dev/sd[a-p]</code>，虚拟机可能为 <code>/dev/vd/[a-p]</code></li> <li>磁盘的第一个扇区主要记录了两个重要的信息，
<ol><li>主要启动记录区（Master Boot Record，MBR)，可以安装卡机管理程序的地方，有 446 Bytes</li> <li>分区表（partition table），记录整颗硬盘分区的状态，64 Bytes</li></ol></li> <li>磁盘的 MBR 分区方式中，主要与延伸分区最多可以有 4 个，逻辑分区的装置名号码一定由 5 号开始</li> <li>如果磁盘容量大于 2 TB 以上时，系统会自动使用 GPT 分区方式来处理磁盘分区</li> <li>GPT 分区已经没有延伸与逻辑分区槽的概念，你可以想象成所有的分区都是主分区</li> <li>某些操作系统使用 GPT 分区时，必须要搭配 UEFI 的新型 BIOS 格式才可以安装使用</li> <li>开机的流程：
<ol><li>BIOS</li> <li>MBR</li> <li>boot loader</li> <li>核心文件</li></ol></li> <li>boot loader 的功能主要有：提供选单、加载核心、转交控制权给其他 loader</li> <li>boot loader 可以安装的地点有两个：<code>MBR</code> 与 <code>boot sector</code></li> <li>Linux 操作系统的文件使用目录树系统，与磁盘的对应需要有挂载的动作才行。</li> <li>新手的简单分区，建议只要有<code>/</code> 和<code>swap</code>两个分区槽即可。</li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notebook/Linux/vbird1/1-introduction/02.html" class="prev">
        1.2 Linux是什么与如何学习
      </a></span> <span class="next"><a href="/notebook/Linux/vbird1/1-introduction/04.html">
        1.4 安装 CentOS7.x 
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/notebook/assets/js/app.c5692012.js" defer></script><script src="/notebook/assets/js/2.f2581a98.js" defer></script><script src="/notebook/assets/js/7.d1f4449f.js" defer></script>
  </body>
</html>
