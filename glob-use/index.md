# glob文件匹配模式


<!--more-->

## 0x00 简介

{{< typeit >}}

glob模式是指shell所使用的**路径**通配符，即简化了的正则表达式。常用于类Unix环境。

{{< /typeit >}}

{{< admonition note "注意" true >}}
shell 通配符 / glob 模式通常用来匹配目录以及文件，而不是文本！！！
{{< /admonition >}}

## 0x01 语法和使用

### 通配符(wild matching)

1. `*`匹配**0或多个**任意数量字符，包括**空字符**。

   例：

   ```sh
   like* 
   #可匹配：likeq,likebetter,like07,like
   *like* 
   #可匹配：ilikeyou,helikeshe,TomlikeMary,like
   ```

2. `?`可匹配**任意一个**字符。

   例:

   ```sh
   ?est 
   #可匹配：west,test,Rest,pest等等
   #不可匹配:est
   ```

### 字符集(Character Classes)

- `[abc]`可匹配任意**一个**`[]`包含的字符。

  例：
  ```sh
  [rtW]est
  #只可以匹配：rest或test或West。
  ```

### 字符范围（Range)

-  `[a-z]`匹配任意**一个**给定范围的字符：

   例：

   ```shell
   a[0-9]
   #可匹配：a0,a1,a2等等
   #不可匹配：aa,a,a11
   ```
   

注意：如果`-`出现在开头或结尾，并不表示范围，如`[-a]`或`[a-]`，表示匹配字符`a`或`-`。

### 字符取反（Complementation）

- `!`排除，如`[!abc]`、`[!a-z]`不匹配任意一个`[]`包含或给定范围的字符。

  例：

  ```sh
  [!rt]est
  #可匹配：west,pest等等，
  #不可匹配：rest、test
  ```

  例：

  ```sh
  test[!5-8]
  # 可匹配：test1,test2,test9
  #不可匹配：test5,test6,test7,test8
  ```

### 专用字符集

|     字符     |        意义        |
| :----------: | :----------------: |
| `[:alnum:]`  |  任意数字或者字母  |
| `[:alpha:]`  |      任意字母      |
| `[:space:]`  |        空格        |
| `[:lower:]`  |      小写字母      |
| `[:digit:]`  |      任意数字      |
| `[:upper:]`  |    任意大写字母    |
| `[:cntrl:]`  |       控制符       |
| `[:graph:]`  |        图形        |
| `[:print:]`  |     可打印字符     |
| `[:punct:]`  |      标点符号      |
| `[:xdigit:]` |     十六进制数     |
| `[:blank:]`  | 空白字符（未验证） |



### 扩展

- 上面所有形式的glob都不可以匹配路径分隔符（linux中的`/`，windows中的`\`）。

  例：

  ```sh
  *.txt
  #不可匹配：dir1/test.txt,dir2/dir21/test.txt
  ```

  

- `**`匹配任意数量的字符包括空字符（包括路径分隔符）,即可匹配0或多个子文件夹。

  例：

  ```sh
  **/*.txt
  #可匹配a/b/c/t.txt,a/s.txt
  ```

- 任何以`.`开头命名的文件，都必须在glob中显示指定才能匹配。

  例：

  ```sh
  #.abc用
  *
  #匹配不到,必须用
  .*
  #匹配。
  ```

- glob与正则表达式不同，glob只匹配路径名，不匹配文件内容。

- glob尝试匹配整个字符串（例：`S*.doc`将匹配`S.doc`和`SA.doc`但不匹配`POST.doc`或`SURREY.docks`）正则要只匹配子串须使用`^`和`$`所以，`S*.doc`等价正则是`^S.*\.doc$`

## 0x02 示例

这里使用 /etc 下的文件为例

匹配以 a开头，中间包含任意数量数字的文件

```sh
ls a*[0-9]*
#当然你是找不到的，因为通常情况下 /etc 下没有这样的文件
```

匹配以任意小写字母开头，中间包含数字的文件

```sh
ls [[:lower:]]*[0-9]*
#相信你已经看到了一些文件，我们继续
```

列出所有文件中以 init 开头，英文结尾的文件

```sh
ls init*[a-z]
```

列出以 au,b,c 开头的文件

```sh
ls {"au",[bc]}* 
```

## 0x03 注意事项

1. 在使用专属字符集的时候，字符集之外还需要用` [ ]` 来包含住，否则专用字符集不会生效，例如` [[:space:]]`。
2. 想要转义的时候，单引号与双引号使用方法是不同的，单引号会转义所有字符，而且单引号中间不允许再出现单引号，双引号允许出现特定的 shell 元字符，具体字符可以自行查询。
3. 在使用花括号 `{} `的时候，里面的单个字符串需要使用单引号或者双引号括住，否则就会视为多个的单个字符。

## 0x04 参考

[Glob匹配模式](https://www.jianshu.com/p/add26e0f9c93)

[glob模式](https://www.cnblogs.com/xdlysk/p/5183604.html)
